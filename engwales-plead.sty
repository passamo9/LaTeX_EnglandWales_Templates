\ProvidesPackage{engwales-plead}[2021-02-13 Package for pleading creation in England/Wales styles]

\RequirePackage{soul}  % spaced out boxes
\RequirePackage[normalem]{ulem}
\RequirePackage[explicit]{titlesec}
\RequirePackage{calc}

\newcommand\court[1]{\def\@court{#1}}
\newcommand\casenumber[1]{\def\@casenumber{#1}}
\newcommand\claimant[1]{\def\@claimant{#1}}
\newcommand\defendant[1]{\def\@defendant{#1}}

\renewcommand\maketitle{%
  \begingroup
  \linespread{1.5}\setlength\parindent{0pt}\bfseries
  \parbox[t]{.65\textwidth}{\uline{\@court}}
  Case No~\@casenumber

  \vspace{24pt}

  \so{BETWEEN}
  \begin{center}\@claimant\end{center}
  \begin{flushright}\uline{Claimant}\end{flushright}
  \begin{center}and\end{center}
  \begin{flushright}\end{flushright}
  \begin{center}\@defendant\end{center}
  \begin{flushright}\uline{Defendant}\end{flushright}
  \endgroup
}

%% Reformats \section
\titleformat{\section}{\normalfont\bfseries}{\thesection}{1em}
{\begin{center}
    \vspace{-0.5em}
    \rule[0.4em]{\widthof{\normalfont\bfseries\MakeUppercase{#1}}+2em}{1pt}\\\vspace{0.4em}
    \MakeUppercase{#1}\vspace{0.6em}\\
    \rule[0.5em]{\widthof{\normalfont\bfseries\MakeUppercase{#1}}+2em}{1pt}\\
\end{center}}
